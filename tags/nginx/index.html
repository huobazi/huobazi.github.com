
    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href='https://huobazi.aspxboy.com/css/all.min.css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="武眉博" href='https://huobazi.aspxboy.com/index.xml' />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://huobazi.aspxboy.com">武眉博</a></h1>
            <h2 class="brand-tagline"> Marble&#39;s blog </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/huobazi">
                        <i class="fa fa-twitter"></i> Twitter
                    </a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/huobazi">
                        <i class="fa fa-github-alt"></i> Github
                    </a>
                </li>
                
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://www.linkedin.com/in/huobazi">
                        <i class="fa fa-linkedin"></i> LinkedIn
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href='https://huobazi.aspxboy.com/index.xml'>
                        <i class="fa fa-rss"></i> rss
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">01 Jan 2011</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://huobazi.aspxboy.com/blog/2011/01/01/ubuntu-nginx-php-fastcgi/" class="post-title">在ubuntu上配置 nginx和php&#43;fastcgi</a>

                        <p class="post-meta">
                            
                            
                                
                                    <a class="post-category post-category-LAMP" href='/tags/lamp'>LAMP</a>
                                
                                    <a class="post-category post-category-PHP" href='/tags/php'>PHP</a>
                                
                                    <a class="post-category post-category-LAMP" href='/tags/lamp'>LAMP</a>
                                
                                    <a class="post-category post-category-nginx" href='/tags/nginx'>nginx</a>
                                
                                    <a class="post-category post-category-Ubuntu" href='/tags/ubuntu'>Ubuntu</a>
                                
                                    <a class="post-category post-category-fastcgi" href='/tags/fastcgi'>fastcgi</a>
                                
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>(1)安装php5<br />apt-get install php5 php-pear php5-cli php5-common php5-xcache php5-cgi php5-mysql php5-curl  php5-gd  php5-imagick  php5-xmlrpc  php5-dev php5-memcache<br />(2)安装nginx<br />apt-get install nginx<br />(3)安装spawn-fcgi<br /> apt-get install spawn-fcgi<br />(4)设置，也是最头疼滴地方哦</p>
<p>在/etc/nginx/fastcgi_params 文件最后，加入一行，可以用sudo gedit /etc/nginx/fastcgi_params打开文件<br /><strong>fastcgi_param SCRIPT_FILENAME     $document_root$fastcgi_script_name;</strong><br />设置php.ini的 cgi.fix_pathinfo=1;doc_root=<br />拷贝/etc/nginx/sites-availab修改本机hosts文件，指定一个域名<br />修改server_name<br />在server_name同级增加root 设置为网站根目录<br />location里 加上 index.php<br />php的fast-cgi配置</p>
<p><span style="color: #fff; background-color:#000;">    location ~ \.php$ {<br />        fastcgi_pass   127.0.0.1:9000;<br />        fastcgi_index  index.php;<br />        include fastcgi_params;     <br />    }</span><br />$ sudo killall -HUP php5-cgi<br />$ sudo /usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 5 -u www-data -g www-data -f /usr/bin/php5-cgi -P /var/run/fastcgi-php.pid<br />$ /etc/init.d# sudo /etc/init.d/nginx restart <br />在网站内放个phpinfo测试一下，ok了。</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">24 Jul 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://huobazi.aspxboy.com/blog/2010/07/24/ruby-on-rails-nginx-passenger-memcached-on-centos/" class="post-title">在centos上装rubyee,passenger和memcached ,搭建rails环境</a>

                        <p class="post-meta">
                            
                            
                                
                                    <a class="post-category post-category-LAMP" href='/tags/lamp'>LAMP</a>
                                
                                    <a class="post-category post-category-Rails" href='/tags/rails'>Rails</a>
                                
                                    <a class="post-category post-category-nginx" href='/tags/nginx'>nginx</a>
                                
                                    <a class="post-category post-category-RoR" href='/tags/ror'>RoR</a>
                                
                                    <a class="post-category post-category-Ruby" href='/tags/ruby'>Ruby</a>
                                
                                    <a class="post-category post-category-memcache" href='/tags/memcache'>memcache</a>
                                
                                    <a class="post-category post-category-passenger" href='/tags/passenger'>passenger</a>
                                
                                    <a class="post-category post-category-RubyEE" href='/tags/rubyee'>RubyEE</a>
                                
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>流水笔记一则.</p>
<p>我之前已在服务器配置了nginx，php，mysql等，现在先安装ruby企业版</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<span style="color: #c0c0c0;">cd</span><span style="color: #00bbbb;"> /tmp</span><br /><span style="color: #00bbbb;">wget http:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">rubyforge</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">frs</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">download</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">php</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">71096</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">xzvf</span> <span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/installer</span>
</div>
<p>然后按照提示做</p>
<p>设置一下环境变量 <br />export PATH=/rubyee/bin:$PATH<br />接着<br />ruby -v<br />gem -v<br />看到版本号，说明rubyee 安装ok</p>
<p>下来<br />gem install passenger<br />passenger-install-nginx-module</p>
<p>按照提示在nginx配置文件里增加：</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">http</span> <span style="color: #c0c0c0;">{</span><br />     <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br />     <span style="color: #c0c0c0;">passenger_root</span><span style="color: #00bbbb;"> /rubyee/</span><span style="color: #c0c0c0;">lib</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gems</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gems</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">passenger</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span>;<br />     <span style="color: #c0c0c0;">passenger_ruby</span><span style="color: #00bbbb;"> /rubyee/</span><span style="color: #c0c0c0;">bin</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span>;<br />     <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">}</span></p>
<p>  <span style="color: #c0c0c0;">server</span> <span style="color: #c0c0c0;">{</span><br />     <span style="color: #c0c0c0;">listen</span> <span style="color: #c0c0c0;">80</span>;<br />     <span style="color: #c0c0c0;">server_name</span> <span style="color: #c0c0c0;">www</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">yourhost</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">com</span>;<br />     <span style="color: #c0c0c0;">root</span><span style="color: #00bbbb;"> /somewhere/</span><span style="color: #00ffff; font-weight: bold;">public</span>;   <span style="color: #696969;"># &lt;--- be sure to point to 'public'!</span><br />     <span style="color: #c0c0c0;">passenger_enabled</span> <span style="color: #c0c0c0;">on</span>;<br />  <span style="color: #c0c0c0;">}</span></p>
</div>
<p>rails 欧了~</p>
<p>下来开始装 memcached,</p>
<p>memcached 的使用需要libeven的支持</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">cd</span><span style="color: #00bbbb;"> /tmp</span><br /><span style="color: #00bbbb;">wget http:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">www</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">monkey</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/~</span><span style="color: #c0c0c0;">provos</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">a</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">zxvf</span> <span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">a</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">prefix</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr</span><br /><span style="color: #00bbbb;">make &amp;&amp; make install</span></p>
<p><span style="color: #00bbbb;">cd /</span><span style="color: #c0c0c0;">tmp</span><br /><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">http</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">latest</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">zxvf</span> <span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">5</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">5</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">prefix</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/</span><span style="color: #c0c0c0;">local</span><br /><span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">&amp;&amp;</span> <span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">install</span></p>
</div>
<p> 现在可以用<br />service memcached start  </p>
<p>和<br />  service memcached stop  </p>
<p>这两个很骚的命令来管理memcached服务了,欧了~</p>
<p>安装mysql gem<br />gem install --no-rdoc --no-ri mysql -- --with-mysql-dir=/usr/local/mysql --with-mysql-config=/usr/local/mysql/bin/mysql_config</p>
<p>安装 ImageMagick</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">ftp</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ftp</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">imagemagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">pub</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">xvfz</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">*</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">disable</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">static</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">modules</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">gs</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">font</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">dir</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/s</span><span style="color: #c0c0c0;">hare</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">fonts</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">type1</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gsfonts</span><br /><span style="color: #c0c0c0;">make</span><br /><span style="color: #c0c0c0;">sudo</span> <span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">install</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">rm</span> <span style="color: #c0c0c0;">-</span><span style="color: #00ffff;">Rf</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">*</span></p>
<p><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">http</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">rubyforge</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">frs</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">download</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">php</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">70067</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">13</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">bz2</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">jxf</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">13</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">bz2</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">*</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">disable</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">static</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">modules</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">without</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">perl</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">without</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">magick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">plus</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">plus</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">jpeg</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">png</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">tiff</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">quantum</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">depth</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">8</span>  <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">gs</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">font</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">dir</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/s</span><span style="color: #c0c0c0;">hare</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">fonts</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">type1</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gsfonts</span><br /><span style="color: #c0c0c0;">ruby</span> <span style="color: #c0c0c0;">setup</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rb</span><br /><span style="color: #c0c0c0;">ruby</span> <span style="color: #c0c0c0;">setup</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rb</span> <span style="color: #c0c0c0;">install</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">rm</span> <span style="color: #c0c0c0;">-</span><span style="color: #00ffff;">Rf</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">*</span></p>
</div>
<p>最后 上传 rails 程序<br />接着 rake gems:install</p>
<p>centos安装rmagick出现以下错误：<br />libMagickCore.so.2: cannot open shared object file: No such file or directory – /usr/lib/ruby/gems/1.8/gems/rmagick-2.8.0/lib/RMagick2.so<br />解决办法：</p>
<p>ldconfig /usr/local/lib</p>
<p>错误[memcache-client] Could not load SystemTimer gem, falling back to Ruby's slower/unsafe timeout library: no such file to load -- system_timer<br />rake aborted!</p>
<p>sudo gem install system_timer</p>
<p>Magick::ImageMagickError (unable to read font `/usr/local/lib/ImageMagick-6.6.3/config//usr/share/fonts/type1/gsfonts/n019003l.pfb' @ error/annotate.c/RenderFreetype/1056: `(null)'):<br />错误</p>
<p>wget http://sourceforge.net/projects/gs-fonts/files/gs-fonts/8.11%20%28base%2035%2C%20GPL%29/ghostscript-fonts-std-8.11.tar.gz/download<br /> tar -zxvf ghostscript-fonts-std-8.11.tar.gz<br />解压后拷贝到需要的目录</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">09 Jul 2009</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://huobazi.aspxboy.com/blog/2009/07/09/nginx-typecho-rewrite/" class="post-title">nginx下typecho的rewrite</a>

                        <p class="post-meta">
                            
                            
                                
                                    <a class="post-category post-category-LAMP" href='/tags/lamp'>LAMP</a>
                                
                                    <a class="post-category post-category-Typecho" href='/tags/typecho'>Typecho</a>
                                
                                    <a class="post-category post-category-LAMP" href='/tags/lamp'>LAMP</a>
                                
                                    <a class="post-category post-category-nginx" href='/tags/nginx'>nginx</a>
                                
                                    <a class="post-category post-category-Rewirte" href='/tags/rewirte'>Rewirte</a>
                                
                                    <a class="post-category post-category-代码片段" href='/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5'>代码片段</a>
                                
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>导数据到typecho的时候是在localhost的windows xp系统上用的apache,部署时用的是nginx<br />先是发现无法登陆按照<a href="http://forum.typecho.org/viewtopic.php?f=4&amp;t=238&amp;p=852&amp;hilit=nginx#p852" target="_blank">这篇帖子</a>内的方法配置了vhost.conf，发现可以登陆了，接着又出现了<br />无法编辑post的问题，具体症状见<a href="http://forum.typecho.org/viewtopic.php?f=4&amp;t=270" target="_blank">这篇帖子</a>,甚是郁闷啊，google+baidu 找到一片描写wp的<br />rewrite的<a href="http://hi.baidu.com/3322/blog/item/95d254e7594a012bb93820bb.html" target="_blank">帖子</a>,因typecho与wp笔记像，抱着试试看的想法,在测试站点试验了一下，嘿嘿<br />能用，转寄在此，备忘</p>
<pre>
location / {
        index index.html index.php;
        if (-f $request_filename/index.html){
            rewrite (.*) $1/index.html break;
        }
        if (-f $request_filename/index.php){
            rewrite (.*) $1/index.php;
        }
        if (!-f $request_filename){
            rewrite (.*) /index.php;
        }
    }
</pre>
<p>同时感谢<a class="titlink" title="Atrhis的空间 http://hi.baidu.com/3322" href="http://huobazi.aspxboy.com/3322">Atlantis</a>  :-)</p>
                    </div>
                </section>
                
            </div>
            

            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src='https://huobazi.aspxboy.com/js/all.min.js'></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56321-3', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
