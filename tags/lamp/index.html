<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lamp &middot; 武眉博</title>

    <meta name="description" content="Marble&#39;s blog">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="huobazi" />
    <meta name="twitter:title" content="Lamp &middot; 武眉博">
    <meta name="twitter:description" content="Marble&#39;s blog">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Lamp &middot; 武眉博">
    <meta property="og:description" content="Marble&#39;s blog">

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <link href='http://fonts.useso.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    
    
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    

    <link rel="stylesheet" href="/css/all.min.css">
    <link href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://huobazi.aspxboy.com/">武眉博</a></h1>
            <h2 class="brand-tagline"> Marble&#39;s blog </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="http://twitter.com/huobazi"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="http://github.com/huobazi "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
            </ul>
        </nav>
    </div>
</div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">06 Aug 2011</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2011/08/06/ubuntu-redis-init-service-autorun/" class="post-title">在 Ubuntu 下安装 Redis 并使用 init 脚本启动  &amp;&amp; 添加 删除ubuntu自启动服务</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-Ubuntu" href="http://huobazi.aspxboy.com//tags/ubuntu">Ubuntu</a><a class="post-category post-category-Redis" href="http://huobazi.aspxboy.com//tags/redis">Redis</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font: normal normal normal 12px/normal Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace;  font-family: 'Bitstream Vera Sans Mono', 'Courier New', monospace; "><span style="font-family: helvetica, arial, freesans, clean, sans-serif; line-height: 14px; white-space: normal;">

<div id="LC1" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">1. 下载安装：</div>

<div id="LC2" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC3" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">cd /tmp</div>

<div id="LC4" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">wget http://redis.googlecode.com/files/redis-*.*.*.tar.gz</div>

<div id="LC5" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">tar -zxf redis-*.*.*.tar.gz</div>

<div id="LC6" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">cd redis-*.*.*</div>

<div id="LC7" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">make</div>

<div id="LC8" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo make install</div>

<div id="LC8" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC9" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">2. 配置init脚本：</div>

<div id="LC10" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC11" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">wget https://github.com/ijonas/dotfiles/raw/master/etc/init.d/redis-server</div>

<div id="LC12" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">wget https://github.com/ijonas/dotfiles/raw/master/etc/redis.conf</div>

<div id="LC13" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo mv redis-server /etc/init.d/redis-server</div>

<div id="LC14" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo chmod +x /etc/init.d/redis-server</div>

<div id="LC15" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo mv redis.conf /etc/redis.conf</div>

<div id="LC15" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC16" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">3. 初始化用户和日志路径</div>

<div id="LC17" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC18" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo useradd redis</div>

<div id="LC19" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo mkdir -p /var/lib/redis</div>

<div id="LC20" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo mkdir -p /var/log/redis</div>

<div id="LC21" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo chown redis.redis /var/lib/redis</div>

<div id="LC22" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo chown redis.redis /var/log/redis</div>

<div id="LC22" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC23" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">4. 启动Redis：</div>

<div id="LC24" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

<div id="LC25" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">sudo /etc/init.d/redis-server start</div>

<div id="LC25" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;"></div>

</span></pre>
<pre style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font: normal normal normal 12px/normal Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace;  font-family: 'Bitstream Vera Sans Mono', 'Courier New', monospace; ">
<span style="font-family: helvetica, arial, freesans, clean, sans-serif; line-height: 14px; white-space: normal;">

<div id="LC1" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">添加一个服务</div>

<div id="LC2" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">#sudo update-rc.d 服务名 defaults 99</div>

<div id="LC4" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">删除一个服务</div>

<div id="LC5" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">#sudo update-rc.d 服务名 remove</div>

<div id="LC7" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">临时重启一个服务</div>

<div id="LC8" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">#/etc/init.d/服务名 restart</div>

<div id="LC10" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">临时关闭一个服务</div>

<div id="LC11" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">#/etc/init.d/服务名 stop</div>

<div id="LC13" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">临时启动一个服务</div>

<div id="LC14" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 1em;  margin: 0px;">#/etc/init.d/服务名 start</div>

</span>
</pre>              

                    </div>
                </section>
                
                <h1 class="content-subhead">01 Jan 2011</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2011/01/01/ubuntu-nginx-php-fastcgi/" class="post-title">在ubuntu上配置 nginx和php&#43;fastcgi</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-PHP" href="http://huobazi.aspxboy.com//tags/php">PHP</a><a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-nginx" href="http://huobazi.aspxboy.com//tags/nginx">nginx</a><a class="post-category post-category-Ubuntu" href="http://huobazi.aspxboy.com//tags/ubuntu">Ubuntu</a><a class="post-category post-category-fastcgi" href="http://huobazi.aspxboy.com//tags/fastcgi">fastcgi</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>(1)安装php5<br />apt-get install php5 php-pear php5-cli php5-common php5-xcache php5-cgi php5-mysql php5-curl  php5-gd  php5-imagick  php5-xmlrpc  php5-dev php5-memcache<br />(2)安装nginx<br />apt-get install nginx<br />(3)安装spawn-fcgi<br /> apt-get install spawn-fcgi<br />(4)设置，也是最头疼滴地方哦</p>
<p></p>
<p>在/etc/nginx/fastcgi_params 文件最后，加入一行，可以用sudo gedit /etc/nginx/fastcgi_params打开文件<br /><strong>fastcgi_param SCRIPT_FILENAME     $document_root$fastcgi_script_name;</strong><br />设置php.ini的 cgi.fix_pathinfo=1;doc_root=<br />拷贝/etc/nginx/sites-availab修改本机hosts文件，指定一个域名<br />修改server_name<br />在server_name同级增加root 设置为网站根目录<br />location里 加上 index.php<br />php的fast-cgi配置</p>
<p><span style="color: #fff; background-color:#000;">    location ~ \.php$ {<br />        fastcgi_pass   127.0.0.1:9000;<br />        fastcgi_index  index.php;<br />        include fastcgi_params;     <br />    }</span><br />$ sudo killall -HUP php5-cgi<br />$ sudo /usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 5 -u www-data -g www-data -f /usr/bin/php5-cgi -P /var/run/fastcgi-php.pid<br />$ /etc/init.d# sudo /etc/init.d/nginx restart <br />在网站内放个phpinfo测试一下，ok了。</p>                

                    </div>
                </section>
                
                <h1 class="content-subhead">01 Jan 2011</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2011/01/01/ubuntu-nginx-php-fastcgi/" class="post-title">在ubuntu上配置 nginx和php&#43;fastcgi</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-PHP" href="http://huobazi.aspxboy.com//tags/php">PHP</a><a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-nginx" href="http://huobazi.aspxboy.com//tags/nginx">nginx</a><a class="post-category post-category-Ubuntu" href="http://huobazi.aspxboy.com//tags/ubuntu">Ubuntu</a><a class="post-category post-category-fastcgi" href="http://huobazi.aspxboy.com//tags/fastcgi">fastcgi</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>(1)安装php5<br />apt-get install php5 php-pear php5-cli php5-common php5-xcache php5-cgi php5-mysql php5-curl  php5-gd  php5-imagick  php5-xmlrpc  php5-dev php5-memcache<br />(2)安装nginx<br />apt-get install nginx<br />(3)安装spawn-fcgi<br /> apt-get install spawn-fcgi<br />(4)设置，也是最头疼滴地方哦</p>
<p></p>
<p>在/etc/nginx/fastcgi_params 文件最后，加入一行，可以用sudo gedit /etc/nginx/fastcgi_params打开文件<br /><strong>fastcgi_param SCRIPT_FILENAME     $document_root$fastcgi_script_name;</strong><br />设置php.ini的 cgi.fix_pathinfo=1;doc_root=<br />拷贝/etc/nginx/sites-availab修改本机hosts文件，指定一个域名<br />修改server_name<br />在server_name同级增加root 设置为网站根目录<br />location里 加上 index.php<br />php的fast-cgi配置</p>
<p><span style="color: #fff; background-color:#000;">    location ~ \.php$ {<br />        fastcgi_pass   127.0.0.1:9000;<br />        fastcgi_index  index.php;<br />        include fastcgi_params;     <br />    }</span><br />$ sudo killall -HUP php5-cgi<br />$ sudo /usr/bin/spawn-fcgi -a 127.0.0.1 -p 9000 -C 5 -u www-data -g www-data -f /usr/bin/php5-cgi -P /var/run/fastcgi-php.pid<br />$ /etc/init.d# sudo /etc/init.d/nginx restart <br />在网站内放个phpinfo测试一下，ok了。</p>                

                    </div>
                </section>
                
                <h1 class="content-subhead">25 Dec 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/12/25/virtualbox-linux-windows-share/" class="post-title">VirtualBox内的Linux和宿主Windows的文件共享</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-linux" href="http://huobazi.aspxboy.com//tags/linux">linux</a><a class="post-category post-category-VirtualBox" href="http://huobazi.aspxboy.com//tags/virtualbox">VirtualBox</a><a class="post-category post-category-Putty" href="http://huobazi.aspxboy.com//tags/putty">Putty</a><a class="post-category post-category-PSCP" href="http://huobazi.aspxboy.com//tags/pscp">PSCP</a><a class="post-category post-category-Ubuntu" href="http://huobazi.aspxboy.com//tags/ubuntu">Ubuntu</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>VirtualBox内的Linux和宿主Windows的文件共享<br />（1）安装增强功能<br />（2）分配数据空间，制定一个名称，假设为“temp”<br />（3）挂载， mount -t vboxsf temp /mnt</p>
<p></p>
<p>OK了<br />另外，反之共享Linux路径，然后在windows内映射网络驱动器即可。</p>
<p>BTW:使用http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html内的PSCP.exe也可以<br />但我没有去试验。<strong></strong></p>                

                    </div>
                </section>
                
                <h1 class="content-subhead">24 Jul 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/07/24/ruby-on-rails-nginx-passenger-memcached-on-centos/" class="post-title">在centos上装rubyee,passenger和memcached ,搭建rails环境</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-Rails" href="http://huobazi.aspxboy.com//tags/rails">Rails</a><a class="post-category post-category-nginx" href="http://huobazi.aspxboy.com//tags/nginx">nginx</a><a class="post-category post-category-RoR" href="http://huobazi.aspxboy.com//tags/ror">RoR</a><a class="post-category post-category-Ruby" href="http://huobazi.aspxboy.com//tags/ruby">Ruby</a><a class="post-category post-category-memcache" href="http://huobazi.aspxboy.com//tags/memcache">memcache</a><a class="post-category post-category-passenger" href="http://huobazi.aspxboy.com//tags/passenger">passenger</a><a class="post-category post-category-RubyEE" href="http://huobazi.aspxboy.com//tags/rubyee">RubyEE</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>流水笔记一则.</p>
<p>我之前已在服务器配置了nginx，php，mysql等，现在先安装ruby企业版</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<span style="color: #c0c0c0;">cd</span><span style="color: #00bbbb;"> /tmp</span><br /><span style="color: #00bbbb;">wget http:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">rubyforge</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">frs</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">download</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">php</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">71096</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">xzvf</span> <span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">enterprise</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">7</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2010</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">02</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/installer</span>
</div>
<p>然后按照提示做</p>
<p></p>
<p>设置一下环境变量 <br />export PATH=/rubyee/bin:$PATH<br />接着<br />ruby -v<br />gem -v<br />看到版本号，说明rubyee 安装ok</p>
<p>下来<br />gem install passenger<br />passenger-install-nginx-module</p>
<p>按照提示在nginx配置文件里增加：</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">http</span> <span style="color: #c0c0c0;">{</span><br />     <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br />     <span style="color: #c0c0c0;">passenger_root</span><span style="color: #00bbbb;"> /rubyee/</span><span style="color: #c0c0c0;">lib</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gems</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">8</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gems</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">passenger</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span>;<br />     <span style="color: #c0c0c0;">passenger_ruby</span><span style="color: #00bbbb;"> /rubyee/</span><span style="color: #c0c0c0;">bin</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ruby</span>;<br />     <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">}</span></p>
<p>  <span style="color: #c0c0c0;">server</span> <span style="color: #c0c0c0;">{</span><br />     <span style="color: #c0c0c0;">listen</span> <span style="color: #c0c0c0;">80</span>;<br />     <span style="color: #c0c0c0;">server_name</span> <span style="color: #c0c0c0;">www</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">yourhost</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">com</span>;<br />     <span style="color: #c0c0c0;">root</span><span style="color: #00bbbb;"> /somewhere/</span><span style="color: #00ffff; font-weight: bold;">public</span>;   <span style="color: #696969;"># &lt;--- be sure to point to 'public'!</span><br />     <span style="color: #c0c0c0;">passenger_enabled</span> <span style="color: #c0c0c0;">on</span>;<br />  <span style="color: #c0c0c0;">}</span></p>
</div>
<p>rails 欧了~</p>
<p>下来开始装 memcached,</p>
<p>memcached 的使用需要libeven的支持</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">cd</span><span style="color: #00bbbb;"> /tmp</span><br /><span style="color: #00bbbb;">wget http:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">www</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">monkey</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/~</span><span style="color: #c0c0c0;">provos</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">a</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">zxvf</span> <span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">a</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">libevent</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">14</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">stable</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">prefix</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr</span><br /><span style="color: #00bbbb;">make &amp;&amp; make install</span></p>
<p><span style="color: #00bbbb;">cd /</span><span style="color: #c0c0c0;">tmp</span><br /><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">http</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">latest</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">zxvf</span> <span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">5</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">memcached</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">4</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">5</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">prefix</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/</span><span style="color: #c0c0c0;">local</span><br /><span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">&amp;&amp;</span> <span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">install</span></p>
</div>
<p> 现在可以用<br />service memcached start  </p>
<p>和<br />  service memcached stop  </p>
<p>这两个很骚的命令来管理memcached服务了,欧了~</p>
<p>安装mysql gem<br />gem install --no-rdoc --no-ri mysql -- --with-mysql-dir=/usr/local/mysql --with-mysql-config=/usr/local/mysql/bin/mysql_config</p>
<p>安装 ImageMagick</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #c0c0c0; background-color: #000000;'>
<p><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">ftp</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">ftp</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">imagemagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">pub</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">xvfz</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">gz</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">*</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">disable</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">static</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">modules</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">gs</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">font</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">dir</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/s</span><span style="color: #c0c0c0;">hare</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">fonts</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">type1</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gsfonts</span><br /><span style="color: #c0c0c0;">make</span><br /><span style="color: #c0c0c0;">sudo</span> <span style="color: #c0c0c0;">make</span> <span style="color: #c0c0c0;">install</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">rm</span> <span style="color: #c0c0c0;">-</span><span style="color: #00ffff;">Rf</span> <span style="color: #00ffff;">ImageMagick</span><span style="color: #c0c0c0;">*</span></p>
<p><span style="color: #c0c0c0;">wget</span> <span style="color: #c0c0c0;">http</span><span style="color: #00bbbb;">:/</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">rubyforge</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">org</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">frs</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">download</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">php</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">70067</span><span style="color: #c0c0c0;">/</span><span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">13</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">bz2</span><br /><span style="color: #c0c0c0;">tar</span> <span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">jxf</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">2</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">13</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">1</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">tar</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">bz2</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">*</span><br /><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">/configure</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">disable</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">static</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">modules</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">without</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">perl</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">without</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">magick</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">plus</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">plus</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">jpeg</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">png</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">tiff</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">yes</span> <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">quantum</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">depth</span><span style="color: #c0c0c0;">=</span><span style="color: #c0c0c0;">8</span>  <span style="color: #c0c0c0;">--</span><span style="color: #c0c0c0;">with</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">gs</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">font</span><span style="color: #c0c0c0;">-</span><span style="color: #c0c0c0;">dir</span><span style="color: #c0c0c0;">=</span><span style="color: #00bbbb;">/usr/s</span><span style="color: #c0c0c0;">hare</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">fonts</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">type1</span><span style="color: #c0c0c0;">/</span><span style="color: #c0c0c0;">gsfonts</span><br /><span style="color: #c0c0c0;">ruby</span> <span style="color: #c0c0c0;">setup</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rb</span><br /><span style="color: #c0c0c0;">ruby</span> <span style="color: #c0c0c0;">setup</span><span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">rb</span> <span style="color: #c0c0c0;">install</span><br /><span style="color: #c0c0c0;">cd</span> <span style="color: #c0c0c0;">.</span><span style="color: #c0c0c0;">.</span><br /><span style="color: #c0c0c0;">rm</span> <span style="color: #c0c0c0;">-</span><span style="color: #00ffff;">Rf</span> <span style="color: #00ffff;">RMagick</span><span style="color: #c0c0c0;">*</span></p>
</div>
<p>最后 上传 rails 程序<br />接着 rake gems:install</p>
<p>centos安装rmagick出现以下错误：<br />libMagickCore.so.2: cannot open shared object file: No such file or directory – /usr/lib/ruby/gems/1.8/gems/rmagick-2.8.0/lib/RMagick2.so<br />解决办法：</p>
<p>ldconfig /usr/local/lib</p>
<p>错误[memcache-client] Could not load SystemTimer gem, falling back to Ruby's slower/unsafe timeout library: no such file to load -- system_timer<br />rake aborted!</p>
<p>sudo gem install system_timer</p>
<p>Magick::ImageMagickError (unable to read font `/usr/local/lib/ImageMagick-6.6.3/config//usr/share/fonts/type1/gsfonts/n019003l.pfb' @ error/annotate.c/RenderFreetype/1056: `(null)'):<br />错误</p>
<p>wget http://sourceforge.net/projects/gs-fonts/files/gs-fonts/8.11%20%28base%2035%2C%20GPL%29/ghostscript-fonts-std-8.11.tar.gz/download<br /> tar -zxvf ghostscript-fonts-std-8.11.tar.gz<br />解压后拷贝到需要的目录</p>               

                    </div>
                </section>
                
                <h1 class="content-subhead">13 Apr 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/04/13/win7-memcache/" class="post-title">win7上安装memcache</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-它山之石" href="http://huobazi.aspxboy.com//tags/%E5%AE%83%E5%B1%B1%E4%B9%8B%E7%9F%B3">它山之石</a><a class="post-category post-category-win7" href="http://huobazi.aspxboy.com//tags/win7">win7</a><a class="post-category post-category-vista" href="http://huobazi.aspxboy.com//tags/vista">vista</a><a class="post-category post-category-memcache" href="http://huobazi.aspxboy.com//tags/memcache">memcache</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>像原来在xp下装一样</p>
<p>memcached.exe -d install<br />memcached.exe -d start</p>
<p>报错“ failed to install service or service already installed”</p>
<p>解决方法：</p>
<p>管理员身份安装，首先找出cmd.exe的原文件（在c:\windows\system32\cmd.exe)，</p>
<p>右击以管理员进入，接下来的步骤就和xp安装方法一样了</p>               

                    </div>
                </section>
                
                <h1 class="content-subhead">30 Mar 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/03/30/hwo-to-injecting-themes-css-javascript-to-header-in-rails/" class="post-title">在rails中不同的view不同皮肤下的js，css，注入js和css到head区域</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-Rails" href="http://huobazi.aspxboy.com//tags/rails">Rails</a><a class="post-category post-category-Ruby" href="http://huobazi.aspxboy.com//tags/ruby">Ruby</a><a class="post-category post-category-layout" href="http://huobazi.aspxboy.com//tags/layout">layout</a><a class="post-category post-category-injecting" href="http://huobazi.aspxboy.com//tags/injecting">injecting</a><a class="post-category post-category-dynamic" href="http://huobazi.aspxboy.com//tags/dynamic">dynamic</a><a class="post-category post-category-ruby on rails" href="http://huobazi.aspxboy.com//tags/ruby-on-rails">ruby on rails</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>利用layout可以很好实现这个需求.</p>
<p>在ApplicationHelper内加入如下代码：</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #e6e1dc; background-color: #111111;'>
<p><span style="color: #cc7833;">def</span> <span style="color: #ffc66d;">require_js</span>(<span style="color: #e6e1dc;">path</span>)<br />    <span style="color: #e6e1dc;">content_for</span> <span style="color: #a5c261;">:header_js</span> <span style="color: #cc7833;">do</span><br />      <span style="color: #e6e1dc;">include_js_tag</span> <span style="color: #e6e1dc;">path</span><br />    <span style="color: #cc7833;">end</span><br />  <span style="color: #cc7833;">end</span></p>
<p>  <span style="color: #cc7833;">def</span> <span style="color: #ffc66d;">require_css</span>(<span style="color: #e6e1dc;">path</span>)<br />    <span style="color: #e6e1dc;">content_for</span> <span style="color: #a5c261;">:header_css</span> <span style="color: #cc7833;">do</span><br />      <span style="color: #e6e1dc;">include_css_tag</span> <span style="color: #e6e1dc;">path</span><br />    <span style="color: #cc7833;">end</span><br />  <span style="color: #cc7833;">end</span></p>
<p>  <span style="color: #cc7833;">def</span> <span style="color: #ffc66d;">include_js_tag</span>(<span style="color: #e6e1dc;">path</span>)<br />    <span style="color: #cc7833;">if</span> <span style="color: #e6e1dc;">not</span> <span style="color: #e6e1dc;">path</span><span style="color: #e6e1dc;">.</span><span style="color: #e6e1dc;">starts_with?</span>(<span style="color: #a5c261;">"http:"</span>)<br />      <span style="color: #e6e1dc;">path</span> <span style="color: #e6e1dc;">=</span> <span style="color: #a5c261;">"/themes/</span><span style="color: #a5c261;">#{</span><span style="color: #6d9cbe;">@setting</span><span style="color: #e6e1dc;">[</span><span style="color: #a5c261;">:theme</span><span style="color: #e6e1dc;">]</span><span style="color: #a5c261;">}</span><span style="color: #a5c261;">/javascripts/"</span> <span style="color: #e6e1dc;">+</span> <span style="color: #e6e1dc;">path</span><br />    <span style="color: #cc7833;">end</span><br />    <span style="color: #e6e1dc;">javascript_include_tag</span> <span style="color: #e6e1dc;">path</span><br />  <span style="color: #cc7833;">end</span></p>
<p>   <span style="color: #cc7833;">def</span> <span style="color: #ffc66d;">include_css_tag</span>(<span style="color: #e6e1dc;">path</span>)<br />    <span style="color: #cc7833;">if</span> <span style="color: #e6e1dc;">not</span> <span style="color: #e6e1dc;">path</span><span style="color: #e6e1dc;">.</span><span style="color: #e6e1dc;">starts_with?</span>(<span style="color: #a5c261;">"http:"</span>)<br />      <span style="color: #e6e1dc;">path</span> <span style="color: #e6e1dc;">=</span> <span style="color: #a5c261;">"/themes/</span><span style="color: #a5c261;">#{</span><span style="color: #6d9cbe;">@setting</span><span style="color: #e6e1dc;">[</span><span style="color: #a5c261;">:theme</span><span style="color: #e6e1dc;">]</span><span style="color: #a5c261;">}</span><span style="color: #a5c261;">/stylesheets/"</span> <span style="color: #e6e1dc;">+</span> <span style="color: #e6e1dc;">path</span><br />    <span style="color: #cc7833;">end</span><br />    <span style="color: #e6e1dc;">stylesheet_link_tag</span> <span style="color: #e6e1dc;">path</span><br />  <span style="color: #cc7833;">end</span></p>
</div>
<p>(如果你要直接在view或者layout内引入css则可以&lt;%= include_css_tag "global.css" %&gt;，这样生成的路径是带有皮肤目录的）</p>
<p>接下来，修改你的layout的head，加入如下代码：</p>
<p></p>
<p>&lt;%= yield :header_js %&gt;<br />&lt;%= yield :header_css %&gt;</p>
<p>然后在需要引入js的View内</p>
<p>&lt;% require_js "jquery/jquery.tools.min.js" %&gt;<br />&lt;% require_js "jquery/jquery.colorbox.min.js" %&gt;</p>
<p>最后run一下，你会看到会在html的head内生成如下html</p>
<p>&lt;script src="/themes/2010v1/javascripts/jquery/jquery.tools.min.js?1269949149" type="text/javascript"&gt;&lt;/script&gt;<br />&lt;script src="/themes/2010v1/javascripts/jquery/jquery.colorbox.min.js?1269949147" type="text/javascript"&gt;&lt;/script&gt;</p>
<p> </p>
<p> </p>                

                    </div>
                </section>
                
                <h1 class="content-subhead">21 Jan 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/01/21/rails-review-on-rails/" class="post-title">优化Rails数据库查询性能 -- rails_reviewer插件</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-Rails" href="http://huobazi.aspxboy.com//tags/rails">Rails</a><a class="post-category post-category-Mysql" href="http://huobazi.aspxboy.com//tags/mysql">Mysql</a><a class="post-category post-category-rails_reviewer" href="http://huobazi.aspxboy.com//tags/rails_reviewer">rails_reviewer</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>发现一个很棒的插件<a href="http://github.com/dsboulder/query_reviewer" target="_blank"> rails_reviewer</a>插件</p>
<p>安装:</p>
<div class="source" style='font-family: "[object HTMLOptionElement]","Consolas","Lucida Console","Courier New"; color: #e6e1dc; background-color: #111111;'>
<span style="color: #e6e1dc;">$</span> <span style="color: #e6e1dc;">script</span><span style="color: #e6e1dc;">/</span><span style="color: #e6e1dc;">plugin</span> <span style="color: #e6e1dc;">install</span> <span style="color: #e6e1dc;">git</span><span style="color: #a5c261;">:/</span><span style="color: #e6e1dc;">/</span><span style="color: #e6e1dc;">github</span><span style="color: #e6e1dc;">.</span><span style="color: #e6e1dc;">com</span><span style="color: #e6e1dc;">/</span><span style="color: #e6e1dc;">dsboulder</span><span style="color: #e6e1dc;">/</span><span style="color: #e6e1dc;">query_reviewer</span><span style="color: #e6e1dc;">.</span><span style="color: #e6e1dc;">git</span><br /><span style="color: #e6e1dc;">$</span> <span style="color: #e6e1dc;">rake</span> <span style="color: #e6e1dc;">query_reviewer</span><span style="color: #a5c261;">:setup</span>
</div>
<p>完毕后重启server,页面左上角浮动一个SQL CRITICAL浮动窗口，里面记录页面加载时执行的所有SQL以及优化建议等。</p>
<p>强烈推荐 !!!</p>             

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Jan 2010</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2010/01/15/rails-mysqlerror-query-not-connected/" class="post-title">rails里Mysql::Error: query: not connected</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-闲言碎语" href="http://huobazi.aspxboy.com//tags/%E9%97%B2%E8%A8%80%E7%A2%8E%E8%AF%AD">闲言碎语</a><a class="post-category post-category-Rails" href="http://huobazi.aspxboy.com//tags/rails">Rails</a><a class="post-category post-category-Mysql" href="http://huobazi.aspxboy.com//tags/mysql">Mysql</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>从ubuntu换回了win7后又慢慢开始折腾以前在本本上跑的一些LAMP网站， php和 mysql还是用以前的xampp里的，仍然可以用。</p>
<p>重装了 ruby 1.8.6, rails 2.3.5 等...发现运行rails网站，弹出messagebox提示找不到libmysql.dll尝试把mysql/bin里的dll来regsvr32，不可，直接拷贝到system32目录下错误没了，但打开网站仍然报错，终端显示“Mysql::Error: query: not connected...."</p>
<p></p>
<p>google来了结果</p>
<p><a href="http://topic.csdn.net/u/20090823/12/2775f2e7-a73a-45b3-a047-5ed9330871cd.html" target="_blank">http://topic.csdn.net/u/20090823/12/2775f2e7-a73a-45b3-a047-5ed9330871cd.html</a></p>
<p><a href="http://xiaolife.com/wordpress/rails-2-3-dbmigrate-issue-with-mysql-5-1-3/" target="_blank">http://xiaolife.com/wordpress/rails-2-3-dbmigrate-issue-with-mysql-5-1-3/</a></p>
<p>猛然间想起来这些个问题上次玩的时候也出现过，真晕，还是写下来，希望SY一遍胜过脑子记忆千遍吧</p>               

                    </div>
                </section>
                
                <h1 class="content-subhead">24 Sep 2009</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://huobazi.aspxboy.com/blog/2009/09/24/sexy-activerecord/" class="post-title">rails中的ActiveRecord真性感！</a>

                        <p class="post-meta">
                            
                            
                                
                                <a class="post-category post-category-LAMP" href="http://huobazi.aspxboy.com//tags/lamp">LAMP</a><a class="post-category post-category-Rails" href="http://huobazi.aspxboy.com//tags/rails">Rails</a><a class="post-category post-category-代码片段" href="http://huobazi.aspxboy.com//tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">代码片段</a><a class="post-category post-category-RoR" href="http://huobazi.aspxboy.com//tags/ror">RoR</a><a class="post-category post-category-ActiveRecord" href="http://huobazi.aspxboy.com//tags/activerecord">ActiveRecord</a><a class="post-category post-category-Ruby" href="http://huobazi.aspxboy.com//tags/ruby">Ruby</a><a class="post-category post-category-on" href="http://huobazi.aspxboy.com//tags/on">on</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Rails使用的ActiveRecord真性感啊，see see吧</p>
<div class="source" style="COLOR: #dcdccc; FONT-FAMILY: '[object]','Consolas','Lucida Console','Courier New'; BACKGROUND-COLOR: #3f3f3f">
<span style="COLOR: #e3ceab">class</span> <span style="COLOR: #dcdccc">User</span> <span style="COLOR: #dcdccc">&lt;</span> <span style="FONT-WEIGHT: bold; COLOR: #dca3a3">ActiveRecord</span><span style="COLOR: #dcdccc">::</span><span style="FONT-WEIGHT: bold; COLOR: #dca3a3">Base</span>  <br />  <span style="COLOR: #dcdccc">has_many</span> <span style="COLOR: #cc9393">:articles</span>  <br /><span style="COLOR: #e3ceab">end</span>  <br /> <br /><span style="COLOR: #e3ceab">class</span> <span style="COLOR: #dcdccc">Article</span> <span style="COLOR: #dcdccc">&lt;</span> <span style="FONT-WEIGHT: bold; COLOR: #dca3a3">ActiveRecord</span><span style="COLOR: #dcdccc">::</span><span style="FONT-WEIGHT: bold; COLOR: #dca3a3">Base</span><br />  <span style="COLOR: #dcdccc">belongs_to</span> <span style="COLOR: #cc9393">:user</span>  <br /><span style="COLOR: #e3ceab">end</span>
</div>
<p>然后执行<br />&gt;&gt; <strong><span style="color: #0000ff;">Article.find(1)</span> </strong>会得到延迟加载user对象的sql语句。如下：</p>
<p></p>
<div class="source" style="COLOR: #dcdccc; FONT-FAMILY: '[object]','Consolas','Lucida Console','Courier New'; BACKGROUND-COLOR: #3f3f3f">
<span style="COLOR: #e3ceab">SELECT</span> <span style="COLOR: #dcdccc">*</span> <span style="COLOR: #e3ceab">FROM</span> <span style="COLOR: #dcdccc">articles</span> <span style="COLOR: #e3ceab">WHERE</span> (<span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">id</span> <span style="COLOR: #dcdccc">=</span><span style="COLOR: #8cd0d3">1</span>) <span style="COLOR: #e3ceab">LIMIT</span> <span style="COLOR: #8cd0d3">1</span>
</div>
<p>当需要访问user对象时，比如用article.user.name会再生成一个sql语句请求数据库。<br />如果执行<br />&gt;&gt; <strong><span style="color: #0000ff;">Article.find(1,:include =&gt; :user)</span></strong> 会得到一次性加载了user的查询</p>
<div class="source" style="COLOR: #dcdccc; FONT-FAMILY: '[object]','Consolas','Lucida Console','Courier New'; BACKGROUND-COLOR: #3f3f3f">
<span style="COLOR: #e3ceab">SELECT</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">extended_html</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r6</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">excerpt</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r7</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">keywords</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r8</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">allow_pings</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r10</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">allow_comments</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r9</span> <span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">id</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t1_r0</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">published</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r11</span> <span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">login</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t1_r1</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">text_filter</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r12</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">id</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r0</span><br /><span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">password</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t1_r2</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">user_id</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r13</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">title</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r1</span> <span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">name</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t1_r3</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">created_at</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r14</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">author</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r2</span><br /><span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">email</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t1_r4</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">updated_at</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r15</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">body</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r3</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">permalink</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r16</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">body_html</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r4</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">guid</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r17</span><br /><span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">`</span><span style="COLOR: #dcdccc">extended</span><span style="COLOR: #dcdccc">`</span> <span style="COLOR: #e3ceab">AS</span> <span style="COLOR: #dcdccc">t0_r5</span><br /><span style="COLOR: #e3ceab">FROM</span> <span style="COLOR: #dcdccc">articles</span> <span style="COLOR: #e3ceab">LEFT</span> <span style="COLOR: #e3ceab">OUTER</span> <span style="COLOR: #e3ceab">JOIN</span> <span style="COLOR: #dcdccc">users</span><br /><span style="COLOR: #e3ceab">ON</span> <span style="COLOR: #dcdccc">users</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">id</span> <span style="COLOR: #dcdccc">=</span> <span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">user_id</span><br /><span style="COLOR: #e3ceab">WHERE</span> (<span style="COLOR: #dcdccc">articles</span><span style="COLOR: #dcdccc">.</span><span style="COLOR: #dcdccc">id</span> <span style="COLOR: #dcdccc">=</span> <span style="COLOR: #8cd0d3">1</span>)</div>
<p>是不是很优美，很性感涅？</p>
<p> </p>                

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 1 of 3</span>
    
      <a href="/tags/lamp/page/2/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a> &nbsp;&nbsp; theme by <a target="_blank" href="https://github.com/dplesca/purehugo">purehugo</a></a></li>
        </ul>
    </div>
</div>
<script src="/js/all.min.js"></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56321-3', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
